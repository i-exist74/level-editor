<!DOCTYPE html>
<html lang="en">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta charset="utf-8">

        <title>level editing test</title>
        <link rel="stylesheet" href="style.css">
    </head>
    <body>
        <nav id="main-menu">
            <div class="dropdown">
                <button class="dropdown__button">File</button>
                <div class="dropdown__content">
                    <button class="dropdown__option" value="openImportModal">Import</button>
                    <button class="dropdown__option" value="openExportModal">Export</button>
                </div>
            </div>
            <div class="dropdown">
                <button class="dropdown__button">Edit</button>
                <div class="dropdown__content">
                    <button class="dropdown__option" value="openEditDimensionsModal">[TODO] Level Dimensions</button>
                </div>
            </div>
            <div class="dropdown">
                <button class="dropdown__button">Render</button>
                <div class="dropdown__content">
                    <button class="dropdown__option" value="openRenderModal">Render</button>
                </div>
            </div>
        </nav>

        <section id="side-ui">
            <h3>Display Settings</h3>
            <div>
                <input type="checkbox" id="toggle-grid-input" checked />
                <label for="toggle-grid-input">Show grid</label>
            </div>

            <br />

            <h3>Edit</h3>
            <div>
                Work layer:
                <span id="work-layer-select">
                    <input type="radio" id="workLayer-1" name="workLayer" value="0" checked />
                    <label for="workLayer-1">1</label>
                    <input type="radio" id="workLayer-2" name="workLayer" value="1" />
                    <label for="workLayer-2">2</label>
                    <input type="radio" id="workLayer-3" name="workLayer" value="2" />
                    <label for="workLayer-3">3</label>
                </span>
            </div>
            <div>
                Selection type:
                <span id="selection-type-select">
                    <input type="radio" id="selectionType-paint" name="selectionType" value="paint" checked />
                    <label for="selectionType-paint">Paint</label>
                    <input type="radio" id="selectionType-rect" name="selectionType" value="rect" />
                    <label for="selectionType-rect">Rect fill</label>
                </span>
            </div>
            <div>
                Action:
                <span id="edit-action-select">
                    <input type="radio" id="editAction-none" name="editAction" value="none" />
                    <label for="editAction-none">None</label>
                    <input type="radio" id="editAction-write" name="editAction" value="write" checked />
                    <label for="editAction-write">Write</label>
                    <input type="radio" id="editAction-remove" name="editAction" value="remove" />
                    <label for="editAction-remove">Remove</label>
                    <input type="radio" id="editAction-toggle" name="editAction" value="toggle" />
                    <label for="editAction-toggle">Toggle</label>
                    <input type="radio" id="editAction-clear" name="editAction" value="clear" />
                    <label for="editAction-clear">Clear All</label>
                </span>
            </div>
            <div>
                Tool:
                <div id="edit-tool-select">
                    <label>
                        <input type="radio" id="editTool-wall" name="editTool" value="wall" checked />
                        <svg viewBox="0 0 1 1">
                            <path d="M 0,0 H 1 V 1 H 0" fill="black">
                        </svg>
                    </label>
                    <label>
                        <input type="radio" id="editTool-floor" name="editTool" value="floor" />
                        <svg viewBox="0 0 1 1">
                            <path d="M 0,0 H 1 V 0.5 H 0" fill="black">
                        </svg>
                    </label>
                    <label>
                        <input type="radio" id="editTool-slope" name="editTool" value="slope" />
                        <svg viewBox="0 0 1 1">
                            <path d="M 0,0 V 1 H 1" fill="black">
                        </svg>
                    </label>
                    <label>
                        <input type="radio" id="editTool-crack" name="editTool" value="crack" />
                        <svg viewBox="0 0 1 1">
                            <text x="0.5" y="0.5" vertical-align="middle" text-align="center" fill="red" font="1px monospace">C</text>
                        </svg>
                    </label>
                    <label>
                        <input type="radio" id="editTool-horizontalPole" name="editTool" value="horizontalPole" />
                        <svg viewBox="0 0 1 1">
                            <path d="M 0,0.4 H 1 V 0.6 H 0" fill="black">
                        </svg>
                    </label>
                    <label>
                        <input type="radio" id="editTool-verticalPole" name="editTool" value="verticalPole" />
                        <svg viewBox="0 0 1 1">
                            <path d="M 0.4,0 H 0.6 V 1 H 0.4" fill="black">
                        </svg>
                    </label>
                    <label>
                        <input type="radio" id="editTool-hive" name="editTool" value="hive" />
                        <svg viewBox="0 0 1 1">
                            <path d="M 0,1 H 1 M 0.5,0" fill="white">
                        </svg>
                    </label>
                    <label>
                        <input type="radio" id="editTool-wormGrass" name="editTool" value="wormGrass" />
                        <svg viewBox="0 0 1 1">
                            <path d="M 0.4,0 H 0.6 V 1 H 0.4" fill="red">
                        </svg>
                    </label>
                    <label>
                        <input type="radio" id="editTool-waterfall" name="editTool" value="waterfall" />
                        <svg viewBox="0 0 1 1">
                            <path d="M 0,0 H 1 V 1 H 0" fill="blue">
                        </svg>
                    </label>
                    <label>
                        <input type="radio" id="editTool-shortcutEntrance" name="editTool" value="shortcutEntrance" />
                        <svg viewBox="0 0 1 1">
                            <path d="M 0,0 H 1 V 1 H 0" fill="black">
                        </svg>
                    </label>
                    <label>
                        <input type="radio" id="editTool-shortcutPath" name="editTool" value="shortcutPath" />
                        <svg viewBox="0 0 1 1">
                            <path d="M 0,0 H 1 V 1 H 0" fill="black">
                        </svg>
                    </label>
                    <label>
                        <input type="radio" id="editTool-playerEntrance" name="editTool" value="playerEntrance" />
                        <svg viewBox="0 0 1 1">
                            <path d="M 0,0 H 1 V 1 H 0" fill="black">
                        </svg>
                    </label>
                    <label>
                        <input type="radio" id="editTool-dragonDen" name="editTool" value="dragonDen" />
                        <svg viewBox="0 0 1 1">
                            <path d="M 0,0 H 1 V 1 H 0" fill="black">
                        </svg>
                    </label>
                    <label>
                        <input type="radio" id="editTool-scavengerHole" name="editTool" value="scavengerHole" />
                        <svg viewBox="0 0 1 1">
                            <path d="M 0,0 H 1 V 1 H 0" fill="black">
                        </svg>
                    </label>
                    <label>
                        <input type="radio" id="editTool-whackAMoleHole" name="editTool" value="whackAMoleHole" />
                        <svg viewBox="0 0 1 1">
                            <path d="M 0,0 H 1 V 1 H 0" fill="black">
                        </svg>
                    </label>
                    <label>
                        <input type="radio" id="editTool-garbageWormHole" name="editTool" value="garbageWormHole" />
                        <svg viewBox="0 0 1 1">
                            <path d="M 0,0 H 1 V 1 H 0" fill="black">
                        </svg>
                    </label>
                    <label>
                        <input type="radio" id="editTool-glassWall" name="editTool" value="glassWall" />
                        <svg viewBox="0 0 1 1">
                            <path d="M 0,0 H 1 V 1 H 0" fill="black">
                        </svg>
                    </label>
                    <label>
                        <input type="radio" id="editTool-rock" name="editTool" value="rock" />
                        <svg viewBox="0 0 1 1">
                            <path d="M 0,0 H 1 V 1 H 0" fill="black">
                        </svg>
                    </label>
                    <label>
                        <input type="radio" id="editTool-spear" name="editTool" value="spear" />
                        <svg viewBox="0 0 1 1">
                            <path d="M 0,0 H 1 V 1 H 0" fill="black">
                        </svg>
                    </label>
                    <label>
                        <input type="radio" id="editTool-forbidFlyChains" name="editTool" value="forbidFlyChains" />
                        <svg viewBox="0 0 1 1">
                            <path d="M 0,0 H 1 V 1 H 0" fill="black">
                        </svg>
                    </label>
                </div>
            </div>

            <br />

            <h3>Controls</h3>
            <ul>
                <li>Zoom: Mouse scroll or pinch with no edit action</li>
                <li>Move camera: Shift + drag, or drag with no edit action</li>
                <li>Force remove edit: hold Alt</li>
                <li>you can click on the labels beside the radio buttons as well as the buttons themselves</li>
            </ul>
        </section>

        <section id="bottom-ui">
            <!-- shhh go away -->
        </section>

        <dialog class="modal" id="import-modal">
                <button class="modal__close-button"></button>

                <h1>Import Project</h1>
                <p>Import a level editor project by navigating to the .txt file.</p>

                <div>
                    <label for="project-file-input">Import file:</label>
                    <input type="file" id="project-file-input" accept=".txt" autofocus />
                    <button id="import-project-button">Load project</button>
                </div>
                <p id="import-error-display"></p>
        </dialog>

        <dialog class="modal" id="export-modal">
                <button class="modal__close-button"></button>

                <h1>Export Project</h1>
                <textarea></textarea>
                <button id="output-project-to-textarea-button">Output project data to text area</button>
                <button id="download-project-button" autofocus>Download project data</button>
                <p id="export-error-display"></p>
        </dialog>

        <dialog class="modal" id="edit-dimensions-modal">
                <button class="modal__close-button"></button>

                <h1>Edit Dimensions</h1>
                <p>Note: Reducing the level size will permanently delete affected parts of the level</p>
                <p>Add 52 width and 43 height for each screen above 1</p>
                <p>changing height not implemented; doesn't modify tile matrix & all except for geometry, so other editors might not work after changing the level size</p>
                <label for="level-width-input">Width:</label>
                <input type="number" id="level-width-input" min="1" value="72" max="1080" autofocus />
                <label for="level-height-input">Height:</label>
                <input type="number" id="level-height-input" min="1" value="43" max="1075" />
                <button id="edit-dimensions-left-top">Move Left/Top Border</button>
                <button id="edit-dimensions-right-bottom">Move Right/Bottom Border</button>
        </dialog>

        <dialog class="modal" id="render-modal">
                <button class="modal__close-button"></button>

                <h1>Render Project</h1>
                <label for="screen-to-render-input">Screen to render:</label>
                <input type="number" id="screen-to-render-input" value="0" min="0">

                <div>
                    <button id="render-project-button" autofocus>Render</button>
                    <button id="download-render-canvas-button">Download</button>
                </div>

                <canvas id="render-output-canvas"></canvas>
        </dialog>

        <div id="graphical-display"></div>

        <script type="module" src="modules/main.mjs"></script>
    </body>
</html>